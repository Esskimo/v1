var Weglot=function(){function e(e){return document.getElementById(e)}function t(e){for(var t,a=[],i=[],r=document.createTreeWalker(e,4,null,!1),s=[],l=[];t=r.nextNode();)""!=t.textContent.trim()&&t.textContent.trim().indexOf("BESbswy")<0&&t.textContent.trim().indexOf("){")<0&&t.textContent.trim().indexOf(") {")<0&&isNaN(t.textContent.trim())&&(1!=t.textContent.trim().length||n(t.textContent.trim()))&&"SCRIPT"!=t.parentNode.nodeName.toUpperCase()&&"STYLE"!=t.parentNode.nodeName.toUpperCase()&&"NOSCRIPT"!=t.parentNode.nodeName.toUpperCase()&&!o(t.parentNode,"wg-notranslate")&&(a.push(t.textContent),i.push(t),s.push(1),l.push({t:1,w:t.textContent}));if(void 0!==e){for(var d=e.getElementsByTagName("input"),u=0;u<d.length;u++){var g=d[u];o(g,"wg-notranslate")||"hidden"==g.type||(""!=g.placeholder.trim()&&isNaN(g.placeholder.trim())&&(a.push(g.placeholder),i.push(g),s.push(3),l.push({t:3,w:g.placeholder})),""!=g.value.trim()&&isNaN(g.value.trim())&&(a.push(g.value),i.push(g),s.push(2),l.push({t:2,w:g.value})))}var p=e.getElementsByTagName("textarea");for(u=0;u<p.length;u++){var c=p[u];o(c,"wg-notranslate")||(""!=c.placeholder.trim()&&isNaN(c.placeholder.trim())&&(a.push(c.placeholder),i.push(c),s.push(3),l.push({t:3,w:c.placeholder})),""!=c.value.trim()&&isNaN(c.value.trim())&&(a.push(c.value),i.push(c),s.push(1),l.push({t:1,w:c.value})))}}return{values:a,nodes:i,types:s,payload:l}}function n(e){var t=e.toUpperCase();return t.toLowerCase()!=t}function a(e){return Object.keys(e).length}function o(e,t){for(;e&&1===e.nodeType&&!e.hasAttribute(t);)e=e.parentNode;return!(!e||1!==e.nodeType||!e.hasAttribute(t))}function i(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=null}}else alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest...");return e}function r(){var t=e("wg_progress"),n=t.firstChild.getAttribute("aria-valuenow"),a=parseInt(n)+(4*Math.random()+2);t.firstChild.setAttribute("aria-valuenow",a),t.firstChild.style.width=a+"%"}function s(t,n,o){var s=document.getElementsByTagName("body")[0];"wait"==n.transition&&(s.style.visibility="hidden");var l=t.nodes,d=t.types,u=t.values,g=t.payload;if(n.originalLanguage!=n.destinationLanguage){if(0!=n.loadingBar)var p=(v=s,(m=document.createElement("div")).className="wg-progress",m.id="wg_progress",m.innerHTML='<div class="wg-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>',v.appendChild(m),setInterval(r,100));var c="https://api.weglot.com/translate?api_key="+n.api_key,f=i();f.onreadystatechange=function(){if(4==f.readyState&&(200==f.status||0==f.status)){0!=n.loadingBar&&(clearInterval(p),(c=e("wg_progress"))&&c.parentNode.removeChild(c)),"wait"==n.transition&&(s.style.visibility="visible");for(var t=JSON.parse(f.responseText),o=t.to_words,i=t.from_words,r=0;r<a(l);r++)try{var g=o[i.indexOf(u[r])];void 0===g&&(1==d[r]?g=l[r].textContent:3==d[r]?g=l[r].placeholder:2==d[r]?g=l[r].value:6==d[r]&&(g=l[r].src)),1==d[r]?l[r].textContent=g:3==d[r]?l[r].placeholder=g:2==d[r]?l[r].value=g:6==d[r]&&(l[r].src=g)}catch(e){console.log(e)}document.getElementsByTagName("html")[0].setAttribute("lang",n.destinationLanguage)}var c;4==f.readyState&&200!=f.status&&0!=f.status&&console.log(f.responseText)},f.open("POST",c,!0),f.setRequestHeader("Content-type","application/json");var v,m,h='{"l_from":"'+n.originalLanguage+'","l_to":"'+n.destinationLanguage+'","title":'+JSON.stringify(o)+',"request_url":"'+window.location.href+'","words":'+JSON.stringify(g)+"}";f.send(h)}else{for(var y=0;y<l.length;y++)try{var w=u[y];1==d[y]?l[y].textContent=w:3==d[y]?l[y].placeholder=w:2==d[y]?l[y].value=w:6==d[y]&&(l[y].src=w)}catch(e){console.log(e)}document.getElementsByTagName("html")[0].setAttribute("lang",n.destinationLanguage)}}function l(e){switch(e){case"en":return"English";case"cs":return"Čeština"}}function d(e){var t=e.parentNode.previousSibling.getAttribute("data-l"),n=e.parentNode.previousSibling.firstChild.innerHTML;e.parentNode.previousSibling.setAttribute("data-l",e.getAttribute("data-l")),e.parentNode.previousSibling.setAttribute("class","current "+e.getAttribute("data-l")),e.parentNode.previousSibling.firstChild.innerHTML=e.firstChild.innerHTML,e.setAttribute("data-l",t),e.setAttribute("class",t),e.setAttribute("id","wg-"+t),e.firstChild.innerHTML=n}function u(e,t){t.parentNode.insertBefore(e,t)}function g(e,t){if(t||(t=document),t.evaluate)return t.evaluate(e,document,null,9,null).singleNodeValue;for(;"/"==e.charAt(0);)e=e.substr(1);for(var n=t,a=e.split("/"),o=0;o<a.length;o++){var i=a[o].split(/(\w*)\[(\d*)\]/gi).filter(function(e){return!(""==e||e.match(/\s/gi))},this),r=i[0],s=i[1]?i[1]-1:0;if(!(o<a.length-1))return n.getElementsByTagName(r)[s];n=n.getElementsByTagName(r)[s]}}window.Prototype&&(delete Object.prototype.toJSON,delete Array.prototype.toJSON,delete Hash.prototype.toJSON,delete String.prototype.toJSON);var p,c,f=(p=window.MutationObserver||window.WebKitMutationObserver,c=window.addEventListener,function(e,t){p?new p(function(e,n){(e[0].addedNodes.length||e[0].removedNodes.length)&&t(e)}).observe(e,{childList:!0,subtree:!0}):c&&(e.addEventListener("DOMNodeInserted",t,!1),e.addEventListener("DOMNodeRemoved",t,!1))});return{openClose:function(e){e.className=e.className.indexOf("country-selector closed")<0?"country-selector closed":"country-selector";var t=document.body,n=document.documentElement,a=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),o=function(e){var t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}}(e).top,i=window.getComputedStyle(e).getPropertyValue("position"),r=window.getComputedStyle(e).getPropertyValue("bottom");window.getComputedStyle(e).getPropertyValue("top");return(o>a/2||"fixed"==i&&"auto"!=r)&&(e.className+=" weg-openup"),!1},setup:function(n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href="css/wg.min.css",document.getElementsByTagName("HEAD").item(0).appendChild(r);var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css",document.getElementsByTagName("HEAD").item(0).appendChild(p),document.addEventListener("DOMContentLoaded",function(r){var p=document.getElementsByTagName("html")[0];if(n.exceptions)for(var c=n.exceptions.split(","),v=0;v<c.length;v++){if(y=document.querySelectorAll(c[v]))for(var m=0;m<y.length;m++){y[m].setAttribute("wg-notranslate","")}}if(n.dynamic){var h=n.dynamic.split(",");for(v=0;v<h.length;v++){var y;if(y=document.querySelectorAll(h[v]))for(m=0;m<y.length;m++){y[m].setAttribute("wg-dynamic","")}}}if(!n.excludeURLs||n.excludeURLs&&!function(e,t){for(var n=t.split(","),a=0;a<n.length;a++)if(new RegExp(n[a]).test(e))return!0;return!1}(window.location.pathname,n.excludeURLs)){var w=t(p),b=document.title;if(function(e,t,n){var a=document.getElementsByTagName("body")[0],o=document.getElementsByTagName("head")[0],i=document.createElement("div");i.innerHTML='<aside style="display:none;" wg-notranslate="" id="weglot_switcher" class="country-selector closed" onclick="Weglot.openClose(this);"></aside>';var r=i.firstChild,p=document.createElement("div");p.innerHTML='<a href="javascript:%20void(0);">'+l(t.originalLanguage)+"</a>",p.className="current "+t.originalLanguage,p.setAttribute("data-l",t.originalLanguage);var c,f,v=document.createElement("ul"),m=t.destinationLanguages.split(",");for(index=0;index<m.length;index++){var h=m[index];if(h!=t.originalLanguage){var y=document.createElement("li");y.className=h,y.innerHTML='<a href="javascript:%20void(0);">'+l(h)+"</a>",y.setAttribute("data-l",h),y.id="wg-"+h,y.onclick=function(){var a={api_key:t.api_key,originalLanguage:t.originalLanguage,destinationLanguage:this.getAttribute("data-l"),transition:t.transition};s(e,a,n),"undefined"!=typeof Storage&&sessionStorage.setItem("wglang",a.destinationLanguage),d(this)},v.appendChild(y)}}r.appendChild(p),r.appendChild(v),void 0===t.buttonOption||void 0===t.buttonOption.flags||t.buttonOption.flags||(o.innerHTML+="<style>.country-selector a:before {display:none;}</style>"),void 0!==t.buttonOption&&void 0!==t.buttonOption.rules&&""!=t.buttonOption.rules&&(o.innerHTML+="<style>"+t.buttonOption.rules+"</style>");try{void 0!==t.buttonOption&&void 0!==t.buttonOption.after?(c=r,(f=g(t.buttonOption.after)).parentNode.insertBefore(c,f.nextSibling)):void 0!==t.buttonOption&&void 0!==t.buttonOption.before?u(r,g(t.buttonOption.before)):void 0!==t.buttonOption&&void 0!==t.buttonOption.atbeginning?u(r,g(t.buttonOption.atbeginning).firstChild):void 0!==t.buttonOption&&void 0!==t.buttonOption.atend?g(t.buttonOption.atend).appendChild(r):(a.appendChild(r),t.position&&"left"==t.position?o.innerHTML+="<style>.country-selector {position : fixed;bottom : 0px;left : 20px;}</style>":o.innerHTML+="<style>.country-selector {position : fixed;bottom : 0px;right : 20px;}</style>")}catch(e){a.appendChild(r),t.buttonOption.position&&"left"==t.buttonOption.position?o.innerHTML+="<style>.country-selector {position : fixed;bottom : 0px;left : 20px;}</style>":o.innerHTML+="<style>.country-selector {position : fixed;bottom : 0px;right : 20px;}</style>"}}(w,n,b),"undefined"!=typeof Storage&&sessionStorage.wglang){if(sessionStorage.wglang!=n.originalLanguage&&2==sessionStorage.wglang.length)s(w,N={api_key:n.api_key,originalLanguage:n.originalLanguage,destinationLanguage:sessionStorage.wglang,transition:n.transition,loadingBar:n.loadingBar},b),d(e("wg-"+N.destinationLanguage))}else if(n.autoSwitch){var N,L=navigator.language||navigator.userLanguage;if(L=L.substring(0,2),n.destinationLanguages.indexOf(L)>-1)s(w,N={api_key:n.api_key,originalLanguage:n.originalLanguage,destinationLanguage:L,transition:n.transition,loadingBar:n.loadingBar},b),d(e("wg-"+N.destinationLanguage))}}f(document.getElementsByTagName("body")[0],function(e){for(var r={values:[],nodes:[],types:[],payload:[]},s=0;s<e.length;s++){var l=e[s].addedNodes;if(void 0!==l[0]&&null!=l[0]&&o(l[0],"wg-dynamic")){var d=t(l[0]);r.values=r.values.concat(d.values),r.nodes=r.nodes.concat(d.nodes),r.types=r.types.concat(d.types),r.payload=r.payload.concat(d.payload),console.log(r)}}var u="";if("undefined"!=typeof Storage&&sessionStorage.wglang&&sessionStorage.wglang!=n.originalLanguage&&2==sessionStorage.wglang.length&&(u=sessionStorage.wglang),""!=u&&r.values.length>0){var g=document.title;console.log("translate to "+u),console.log(r),function(e,t,n,o){var r=e.nodes,s=e.types,l=e.values,d=e.payload,u="https://api.weglot.com/translate?api_key="+t.api_key,g=i();g.onreadystatechange=function(){if(4==g.readyState&&(200==g.status||0==g.status))for(var e=JSON.parse(g.responseText),t=e.to_words,n=e.from_words,o=0;o<a(r);o++){var i=t[n.indexOf(l[o])];void 0===i&&(1==s[o]?i=r[o].textContent:3==s[o]?i=r[o].placeholder:2==s[o]?i=r[o].value:6==s[o]&&(i=r[o].src)),1==s[o]?r[o].textContent=i:3==s[o]?r[o].placeholder=i:2==s[o]?r[o].value=i:6==s[o]&&(r[o].src=i)}4==g.readyState&&200!=g.status&&0!=g.status&&console.log(g.responseText)},g.open("POST",u,!0),g.setRequestHeader("Content-type","application/json");var p='{"l_from":"'+t.originalLanguage+'","l_to":"'+n+'","title":'+JSON.stringify(o)+',"request_url":"'+window.location.href+'","words":'+JSON.stringify(d)+"}";g.send(p)}(r,n,u,g)}})})}}}();